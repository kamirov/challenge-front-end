<section class="page">
   <header>
      <h1>BabyFirst</h1>
   </header>
   <main>
      <div class="steps-cont" ng-include="'app/components/steps.html'"></div>
      
      <h1>Pick your offers</h1>
      <div class="offer-gallery">
         <div class="offer" 
              data-id="{{offer.id}}" 
              ng-class="{ unselectable: app.reachedMaxSelections(),
                          selected: app.isSelected(offer.id) }"
              ng-click="app.select(offer.id)" 
              ng-repeat="offer in app.offers">
            <span class="selected-icon"></span>
            <span class="info-icon" title="Read more about {{offer.name}}" ng-click="app.openModal(offer, $event)"></span>
            <div class="offer-image-cont">
               <img class="offer-image" ng-src="{{offer.image}}">
            </div>
            <span class="tag {{offer.tag | tagToClass}}">{{offer.tag}}</span>
            <span class="name">{{offer.name}}</span>
         </div>
      </div>

      <!--<div class="main-nav-button-cont">
         <a href="" class="main-nav-button" ng-class="{ done: app.reachedMaxSelections() }">
            <span>{{app.selected.length}} of 5 offers selected</span>  
         </a>
      </div>-->
   </main>

    <!-- Modal window -->
    <aside>
      <product-details></product-details>
    </aside>

    <aside>
      <div class="main-nav-button-cont">
         <!--<span ng-if="app.modalIsOpen()">
            <span class="main-nav-button" ng-if="app.isSelected(modal.offer.id)">
               Remove offer
            </span>
            <span ng-if="!app.isSelected(modal.offer.id)">
               <span ng-if="app.reachedMaxSelections()">
                  <a href="http://www.sampler.io" class="main-nav-button done">
                     <span>{{app.selected.length}} of 5 offers selected</span>
                  </a>
               </span>
               <span class="main-nav-button" ng-if="!app.reachedMaxSelections()">
                  Select offer
               </span>
            </span>
         </span>
         <span ng-if="!app.modalIsOpen()">
            <a href="http://www.sampler.io" class="main-nav-button" ng-class="{ done: app.reachedMaxSelections() }">
               <span>{{app.selected.length}} of 5 offers selected</span>
            </a>
         </span>
      </div>-->
         <span 
            class="main-nav-button"
            ng-click="app.handleMainNavButtonClick()" 
            ng-class="{ done: app.reachedMaxSelections(),
                        active: app.isModalSelected() || app.isModalSelectable() }">
            <span ng-if="app.isModalSelected()">Remove offer</span>
            <span ng-if="app.isModalSelectable()">Select offer</span>
            <span ng-if="!app.modalIsOpen() || (!app.isModalSelected() && !app.isModalSelectable())">{{app.selected.length}} of 5 offers selected</span>
         </span>
      </div>
    </aside>

    <footer ng-include="'app/components/footer.html'"></footer>
</section>